
<!DOCTYPE html>
<html>
  <head>
    <title>Infrastruktur som kode</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>

    <script src="https://github.com/downloads/gnab/remark/remark-0.3.1.min.js" type="text/javascript">
      { "highlightStyle": "solarized_light" }
    </script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
    <script src="remark-bekk/lib/bekk.js" type="text/javascript"></script>

    <link href='http://fonts.googleapis.com/css?family=Inconsolata' rel='stylesheet' type='text/css'>

    <link rel="stylesheet/less" type="text/css" href="remark-bekk/lib/bekk.less">
    <script src="http://lesscss.googlecode.com/files/less-1.1.5.min.js" type="text/javascript"></script>

    <style>
      .greyscale img {
        -webkit-filter: grayscale(1);
      }

      .source {
        bottom: 12px;
        left: 20px;
        opacity: .5;
        position: absolute;
        font-size: 0.7em;
      }

      .source::before {
        content: "Kilde: ";
      }

      table {
        border-collapse: collapse;
      }

      th {
        color: rgba(255, 255, 255, .5);
        font-weight: normal;
        text-align: left;
      }

      td,
      th {
        padding: 5px 10px;
        vertical-align: top;
      }

      td.has::after {
        content: "✓";
      }

      #slideshow .slide .content ol li,
      #slideshow .slide .content ul li {
        color: white;
      }
    </style>
  </head>
  <body>
    <textarea id="source">

.front-page

# Infrastruktur som kode

## Presentasjon Software 2012

Ole Christian Rynning
&mdash;
<a href="http://twitter.com/olecr">@olecr</a>

Eivind Uggedal
&mdash;
<a href="http://twitter.com/uggedal">@uggedal</a>

7. februar 2012

---

.pushed.greyscale

![](images/hands.jpg)

.circle.red.top-right[Henda i været!]

.source[http://flic.kr/p/5Z9g8a]

---

.middle.center

# Jobber med drift?

---

.middle.center

# Hvor mange her er utviklere? (eller arkitekter)

---

.middle.center

# Begge deler? (devops)

---

.middle.center

# Deployer til skyen?

---

.middle.center

# Styrer (deler av?) egen infrastruktur?

---

.middle.center

# Har opplevd at systemer eller miljøer (infrastruktur) blir rotete eller avvikende?

---

.middle.center

# Har noen gang opplevd at en applikasjonen funker <strike>på min maskin</strike>. <strike>TEST</strike>. PROD?

---

# Kort om oss 

## Eivind Uggedal

Programmerer, har administrert og automatisert flere populære nettløsninger, samt sin egen MacBookPro/Air med Puppet. Jobber til daglig i en stor norsk bank.

## Ole Christian Rynning

Programmerer med system- og infrastruktur-bakgrunn. Siste tre &aring;rene utviklet systemer, infrastruktur og plattform for kontinuerlige leveranser for Bring sitt utviklingsteam. 

---

# Agenda

* Infrastruktur som kode (Historisk blikk, Definisjon, Hvorfor?)
* Deklarativ konfigurasjonsstyring (Definisjon, Ulike alternativer, Orkestrering og Testing)
* En praktisk demonstrasjon 

---

# Historie

1. Manuell
2. Scripting
3. Fildistribuering
4. Deklarativ syntaks

![](images/timeline.png)

---

# Utviklerteknikker inn i drift 

* Versjonskontroll av konfigurasjon
* Refactoring og kontinuerlig forbedring (Inkrementell/evolusjoner arkitektur) 
* Test-drevet design

---

# (Noen) forretningsverdier

* Reproduserbar infrastruktur
* Større uavhengighet til eksisterende infrastruktur
	* Cloud, konkurranse, etc
* Enklere oversikt over miljøer
* A/B-testing av infrastruktur
* Evolusjonær arkitektur / infrastruktur
* På lengre sikt: lavere driftskostnader

---

# Og i tillegg&helip;

* Kjørbar dokumentasjon
* Reproduserbarhet
* Mer homogenitet i miljøer
* Kontinuerlig integrasjon &amp; "ren kode" for drift
* Testing
* Refactoring

---

.pushed.greyscale

![](images/cowboy.jpg)

# Mindre cowboy-virksomhet!

.source[http://flic.kr/p/6cdm8]

---

# Konfigurasjonsstyring

* Konfigurasjonsfiler
* Avhengigheter (innenfor en maskin og mellom maskiner og deres tjenester)
* Endringer i sanntid

---

.cols.two

# Deklarativ konfigurasjonsstyring

* Deklarativ fremfor imperativ
* Automatiserer og orkestrerer infrastruktur
* Gjenskape et milj&oslash; fra forskjellige utgangspunkt

<div class="col">
Imperativt for Debian:

    .bash
    apt-get install vim

    echo "set nocp" >> /etc/vim/vimrc

Imperativt for RedHat:

    .bash
    yum install vim

    echo "set nocp" >> /etc/vim/vimrc
</div>

<div class="col">
Deklarativt uavhengig av OS:

    .ruby
    package { "vim":
      ensure => present,
    }

    file { "/etc/vim/vimrc":
      content => "set nocp",
    }
</div>

---

# Sammenligninger av noen implementasjoner

<table>
  <tr>
    <th>
      &nbsp;
    <th>
      Puppet
    <th>
      Chef
    <th>
      Salt
    <th>
      Cdist
  <tr>
    <td>
      Klient/tjener
    <td class="has">
      &nbsp;
    <td class="has">
      &nbsp;
    <td class="has">
      &nbsp;
    <td class="has">
      &nbsp;
  <tr>
    <td>
      Pull
    <td class="has">
      &nbsp;
    <td class="has">
      &nbsp;
    <td>
      &nbsp;
    <td>
      &nbsp;
  <tr>
    <td>
      Push
    <td>
      &nbsp;
    <td>
      &nbsp;
    <td class="has">
      &nbsp;
    <td class="has">
      &nbsp;
  <tr>
    <td>
      Lokal modus
    <td class="has">
      &nbsp;
    <td class="has">
      &nbsp;
    <td>
      &nbsp;
    <td>
      &nbsp;
  <tr>
    <td>
      Impl. spr&aring;k
    <td>
      Ruby
    <td>
      Ruby
    <td>
      Python
    <td>
      Python/sh
  <tr>
    <td>
      Bruksspr&aring;k
    <td>
      DSL/Ruby
    <td>
      Ruby
    <td>
      YAML+Jinja/Python
    <td>
      sh
  <tr>
    <td>
      Avhengigheter klient
    <td>
      Ruby, Puppet, Facter
    <td>
      Ruby, Chef-client, Ohai
    <td>
      Python, Salt, &Oslash;MQ
    <td>
      ssh, sh
  <tr>
    <td>
      Avhengigheter tjener
    <td>
      Ruby, Puppetmaster, Rails, (database)
    <td>
      Ruby, Chef-server, Merb, Thin, Java, Solr, RabbitMQ
    <td>
      Python, Salt, &Oslash;MQ
    <td>
      Python, ssh, sh
  <tr>
    <td>
      Utbredelse
    <td>
      Stor
    <td>
      Stor
    <td>
      Liten
    <td>
      Nisje
</table>

---

.middle.center

![](images/puppet-indeed.png)

---

# Native pakker

TODO: complete

Flytte kompleksitet fra konfigurasjonsstyringsverkt&oslash;y til
pakkesystemer (avhengighetsgraf,
enkel avinstallasjon og oppgradering, ...)

deb/rpm/ebuild/pkgsrc/pacman etc

FPM

---

# Testing av konfigurasjon

TODO: complete

---

# Slides og kode

<a href="https://github.com/bekkopen/infrastruktur-som-kode">
  github.com/bekkopen/infrastruktur-som-kode
</a>

---

.pushed.greyscale

![](images/question.jpg)

.circle.red.top-right[Sp&oslashrsm&aring;l?]

.source[http://flic.kr/p/ubG6g]

    </textarea>
    <div id="slideshow"></div>
  </body>
</html>
